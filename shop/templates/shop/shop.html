{% extends 'shop/base.html' %}
{% block title %}Shop{% endblock %}
{% block content %}
<h1>Shop Items</h1>
<form method="get">
    <input type="text" name="q" placeholder="Search by name">
    <input type="text" name="brand" placeholder="Filter by brand">
    <button type="submit">Search</button>
</form>
<ul>
    {% for item in items %}
        <li>
            <a href="{% url 'item_detail' item.id %}">{{ item.name }}</a> - ${{ item.price }}
            {% if item.image %}
                <img src="{{ item.image.url }}" alt="{{ item.name }}" style="max-width: 150px; display:block; margin-top: 8px;">
            {% else %}
                <p><i>No image available</i></p>
            {% endif %}
            <form method="post" action="{% url 'add_to_cart' item.id %}">
                {% csrf_token %}
                {% if user.is_authenticated %}
                <button type="submit">Add to Cart</button>
                {% endif %}
            </form>
        </li>
    {% empty %}
        <li>No items found.</li>
    {% endfor %}
</ul>
{% endblock %}